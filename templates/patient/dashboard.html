{% extends "base.html" %}
{% block content %}
<h3>Patient Dashboard - {{ patient.name }}</h3>

<div class="row">
  <div class="col-md-6">
    <h5>Book Appointment</h5>
    <ul class="list-group">
      {% for doc in doctors %}
        <li class="list-group-item">
          <strong>{{ doc.name }}</strong> - {{ doc.specialization }}
          <a class="btn btn-sm btn-primary float-end" href="{{ url_for('patient_book', doc_id=doc.id) }}">Book</a>
        </li>
      {% endfor %}
    </ul>
  </div>
  <div class="col-md-6">
    <h5>Your Appointments</h5>
    <ul class="list-group">
      {% for a in appointments %}
        <li class="list-group-item">
          Dr. {{ a.doctor.name }} on {{ a.date }} at {{ a.time }} â€” <strong>{{ a.status }}</strong>
          {% if a.status=='Booked' %}
            <form class="d-inline float-end" method="post" action="{{ url_for('patient_cancel', app_id=a.id) }}">
              <button class="btn btn-sm btn-danger">Cancel</button>
            </form>
          {% endif %}
        </li>
      {% else %}
        <li class="list-group-item">No appointments yet</li>
      {% endfor %}
    </ul>
    <a class="btn btn-link mt-2" href="{{ url_for('patient_history') }}">View Full History</a>
  </div>
</div>
{% endblock %}
